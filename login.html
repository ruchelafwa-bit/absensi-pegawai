<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap');
    
    * {
      font-family: 'Poppins', sans-serif;
    }

    /* Animated gradient overlay */
    body {
      position: relative;
    }

    body::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(30, 58, 138, 0.9) 0%, rgba(59, 130, 246, 0.8) 50%, rgba(30, 58, 138, 0.9) 100%);
      animation: gradientShift 15s ease infinite;
      background-size: 200% 200%;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Background parallax effect */
    .bg-image {
      position: fixed;
      inset: 0;
      background-size: cover;
      background-position: center;
      transition: transform 0.1s ease-out;
      z-index: -1;
    }

    /* Card entrance animation */
    @keyframes cardSlideIn {
      from {
        opacity: 0;
        transform: translateY(50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .card-animate {
      animation: cardSlideIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    /* Logo pulse animation */
    @keyframes logoPulse {
      0%, 100% {
        transform: scale(1);
        filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.5));
      }
      50% {
        transform: scale(1.05);
        filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.8));
      }
    }

    .logo-animate {
      animation: logoPulse 3s ease-in-out infinite;
    }

    /* Glassmorphism card */
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(30px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3),
                  0 0 100px rgba(59, 130, 246, 0.2),
                  inset 0 1px 0 rgba(255, 255, 255, 0.6);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .glass-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 35px 70px rgba(0, 0, 0, 0.4),
                  0 0 120px rgba(59, 130, 246, 0.3);
    }

    /* Input field animations */
    .input-field {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }

    .input-field:focus {
      transform: translateY(-3px);
      box-shadow: 0 12px 24px rgba(59, 130, 246, 0.3);
      border-color: #3b82f6;
      background: rgba(255, 255, 255, 0.95);
    }

    .input-field:hover {
      border-color: #93c5fd;
      background: rgba(255, 255, 255, 0.9);
    }

    /* Floating label effect */
    .input-group {
      position: relative;
    }

    .floating-label {
      transition: all 0.3s ease;
      font-weight: 600;
    }

    /* Button ripple and hover effect */
    .btn-login {
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
    }

    .btn-login::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.4);
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .btn-login:hover::before {
      width: 400px;
      height: 400px;
    }

    .btn-login:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 40px rgba(30, 58, 138, 0.5);
      background: linear-gradient(135deg, #1e40af 0%, #2563eb 100%);
    }

    .btn-login:active {
      transform: translateY(-1px);
    }

    /* Loading spinner */
    .spinner {
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Error shake animation */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
      20%, 40%, 60%, 80% { transform: translateX(10px); }
    }

    .shake {
      animation: shake 0.6s;
    }

    /* Error message slide */
    @keyframes errorSlide {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .error-animate {
      animation: errorSlide 0.3s ease-out;
    }

    /* Password toggle eye animation */
    .eye-icon {
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .eye-icon:hover {
      transform: scale(1.2);
      color: #3b82f6;
    }

    /* Back link hover effect */
    .back-link {
      transition: all 0.3s ease;
      position: relative;
    }

    .back-link::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 2px;
      background: #3b82f6;
      transition: width 0.3s ease;
    }

    .back-link:hover::before {
      width: 100%;
    }

    .back-link:hover {
      color: #1e40af;
      transform: translateX(-5px);
    }

    /* Floating particles */
    .particle {
      position: absolute;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.15);
      pointer-events: none;
      animation: float 8s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 0.3;
      }
      33% {
        transform: translateY(-30px) translateX(20px) rotate(120deg);
        opacity: 0.6;
      }
      66% {
        transform: translateY(-15px) translateX(-20px) rotate(240deg);
        opacity: 0.4;
      }
    }

    /* Title gradient animation */
    .gradient-title {
      background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #1e3a8a 100%);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: titleGradient 3s ease infinite;
    }

    @keyframes titleGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Input icon animation */
    .input-icon {
      transition: all 0.3s ease;
    }

    .input-field:focus ~ .input-icon {
      color: #3b82f6;
      transform: scale(1.1);
    }

    /* Success checkmark */
    @keyframes checkmark {
      0% {
        stroke-dashoffset: 100;
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        stroke-dashoffset: 0;
        opacity: 1;
      }
    }

    .checkmark {
      stroke-dasharray: 100;
      animation: checkmark 0.6s ease-in-out forwards;
    }

    /* Smooth transitions for all elements */
    * {
      transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Focus ring for accessibility */
    *:focus-visible {
      outline: 2px solid #3b82f6;
      outline-offset: 2px;
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center relative overflow-hidden">
  
  <!-- Background Image with Parallax -->
  <div class="bg-image" style="background-image: url('imigrasi.jpg');" id="bgImage"></div>

  <!-- Floating Particles -->
  <div class="particle" style="width: 100px; height: 100px; top: 10%; left: 10%; animation-delay: 0s;"></div>
  <div class="particle" style="width: 80px; height: 80px; top: 70%; left: 80%; animation-delay: 1s;"></div>
  <div class="particle" style="width: 60px; height: 60px; top: 30%; left: 85%; animation-delay: 2s;"></div>
  <div class="particle" style="width: 90px; height: 90px; top: 60%; left: 15%; animation-delay: 3s;"></div>
  <div class="particle" style="width: 70px; height: 70px; top: 85%; left: 60%; animation-delay: 1.5s;"></div>

  <!-- Login Card -->
  <div class="relative z-10 w-full max-w-md mx-4">
    <div class="glass-card rounded-3xl p-10 card-animate">
      
      <!-- Logo + Title -->
      <div class="flex flex-col items-center mb-8">
        <div class="relative mb-5">
          <img src="logouptimi.png" 
               class="h-32 w-32 object-contain rounded-2xl shadow-2xl logo-animate" 
               alt="Logo" />
          <!-- Online indicator -->
          <div class="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full border-4 border-white"></div>
          <div class="absolute -top-2 -right-2 w-6 h-6 bg-green-500 rounded-full animate-ping"></div>
        </div>
        
        <h1 class="text-4xl font-extrabold gradient-title mb-2">
          Login Admin
        </h1>
        <p class="text-gray-600 text-sm font-medium">
          üîê Sistem Absensi Pegawai
        </p>
      </div>

      <!-- Form -->
      <form id="loginForm" class="space-y-6">
        
        <!-- Username -->
        <div class="input-group">
          <label class="floating-label block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
            Username
          </label>
          <div class="relative">
            <input id="username" 
                   type="text" 
                   class="input-field w-full border-2 border-gray-300 rounded-xl p-4 pl-12 bg-white/80 focus:outline-none font-medium text-gray-800" 
                   placeholder="Masukkan username"
                   required />
            <svg class="input-icon absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
            </svg>
          </div>
        </div>

        <!-- Password -->
        <div class="input-group">
          <label class="floating-label block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2">
            <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
            </svg>
            Password
          </label>
          <div class="relative">
            <input id="password" 
                   type="password" 
                   class="input-field w-full border-2 border-gray-300 rounded-xl p-4 pl-12 pr-12 bg-white/80 focus:outline-none font-medium text-gray-800" 
                   placeholder="Masukkan password"
                   required />
            <svg class="input-icon absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
            </svg>
            <button type="button" 
                    id="togglePassword" 
                    class="eye-icon absolute right-4 top-1/2 -translate-y-1/2 text-gray-400">
              <svg id="eyeOpen" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
              </svg>
              <svg id="eyeClosed" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"></path>
              </svg>
            </button>
          </div>
        </div>

        <!-- Login Button -->
        <button type="submit" 
                id="loginBtn" 
                class="btn-login w-full py-4 rounded-xl font-bold text-white text-lg shadow-2xl relative z-10">
          <span id="btnText" class="flex items-center justify-center gap-2">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
            </svg>
            Login Sekarang
          </span>
          <span id="btnLoading" class="hidden flex items-center justify-center">
            <div class="spinner"></div>
          </span>
        </button>

        <!-- Back Link -->
        <a href="absensi.html" 
           class="back-link flex items-center justify-center gap-2 text-sm text-gray-600 font-medium mt-4">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
          Kembali ke Halaman Absensi
        </a>
      </form>

      <!-- Error Message -->
      <div id="errorMsg" class="hidden mt-6">
        <div class="error-animate bg-red-50 border-2 border-red-300 rounded-xl p-4 flex items-center gap-3">
          <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          <p class="text-sm text-red-700 font-semibold" id="errorText"></p>
        </div>
      </div>
    </div>

    <!-- Footer Text -->
    <p class="text-center text-white/80 text-xs mt-6 font-medium">
      ¬© 2025 Sistem Absensi Pegawai - Kantor Imigrasi
    </p>
  </div>

  <script>
    // Parallax effect
    const bgImage = document.getElementById('bgImage');
    document.addEventListener('mousemove', (e) => {
      const mouseX = e.clientX / window.innerWidth;
      const mouseY = e.clientY / window.innerHeight;
      bgImage.style.transform = `translate(${mouseX * 30}px, ${mouseY * 30}px) scale(1.1)`;
    });

    // Password toggle
    const togglePassword = document.getElementById('togglePassword');
    const password = document.getElementById('password');
    const eyeOpen = document.getElementById('eyeOpen');
    const eyeClosed = document.getElementById('eyeClosed');

    togglePassword.addEventListener('click', () => {
      const type = password.type === 'password' ? 'text' : 'password';
      password.type = type;
      eyeOpen.classList.toggle('hidden');
      eyeClosed.classList.toggle('hidden');
    });

    // Login functionality
    const STORAGE_KEY = "admin_credentials";
    const loginForm = document.getElementById('loginForm');
    const loginBtn = document.getElementById("loginBtn");
    const errorMsg = document.getElementById("errorMsg");
    const errorText = document.getElementById("errorText");
    const btnText = document.getElementById('btnText');
    const btnLoading = document.getElementById('btnLoading');
    const usernameInput = document.getElementById('username');
    const passwordInput = document.getElementById('password');

    // Default admin
    if (!localStorage.getItem(STORAGE_KEY)) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify({ 
        username: "Adminabsen", 
        password: "Absen2025" 
      }));
    }

    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Hide error
      errorMsg.classList.add('hidden');
      
      // Show loading
      btnText.classList.add('hidden');
      btnLoading.classList.remove('hidden');
      loginBtn.disabled = true;

      // Simulate network delay
      await new Promise(resolve => setTimeout(resolve, 800));

      const u = usernameInput.value.trim();
      const p = passwordInput.value.trim();
      const creds = JSON.parse(localStorage.getItem(STORAGE_KEY));

      if (u === creds.username && p === creds.password) {
        // Success animation
        btnLoading.classList.add('hidden');
        btnText.innerHTML = `
          <svg class="w-6 h-6 checkmark" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
          </svg>
          Login Berhasil!
        `;
        btnText.classList.remove('hidden');
        loginBtn.style.background = 'linear-gradient(135deg, #059669 0%, #10b981 100%)';
        
        sessionStorage.setItem("isAdmin", "true");
        
        setTimeout(() => {
          window.location.href = "admin.html";
        }, 1000);
      } else {
        // Error animation
        btnLoading.classList.add('hidden');
        btnText.classList.remove('hidden');
        loginBtn.disabled = false;
        
        // Shake animation
        const card = document.querySelector('.glass-card');
        card.classList.add('shake');
        setTimeout(() => card.classList.remove('shake'), 600);
        
        // Show error
        errorText.textContent = "‚ùå Username atau password salah!";
        errorMsg.classList.remove('hidden');
        
        // Clear password
        passwordInput.value = '';
        passwordInput.focus();
      }
    });

    // Input focus animations
    const inputs = document.querySelectorAll('.input-field');
    inputs.forEach(input => {
      input.addEventListener('focus', function() {
        this.parentElement.querySelector('.input-icon')?.classList.add('text-blue-500');
      });
      
      input.addEventListener('blur', function() {
        this.parentElement.querySelector('.input-icon')?.classList.remove('text-blue-500');
      });
    });

    // Enter key support
    passwordInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        loginForm.dispatchEvent(new Event('submit'));
      }
    });
  </script>
</body>
</html>
